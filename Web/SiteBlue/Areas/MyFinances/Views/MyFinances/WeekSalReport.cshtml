@*@model SiteBlue.Areas.OwnerPortal.Models.Marketingmodel*@
 
<!DOCTYPE html />
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta content="text/html; charset=utf-8" http-equiv="Content-type"/>
    <link href="../../../../codebase/skins/dhtmlxcalendar_dhx_skyblue.css" rel="stylesheet" type="text/css" />
    <link href="../../../../codebase/dhtmlxcalendar.css" rel="stylesheet" type="text/css" />
    <script src="../../../../codebase/dhtmlxcalendar.js" type="text/javascript"></script>
     <link href="../../../../codebase/dhtmlxchart.css" rel="stylesheet" type="text/css" /> 
    <script src="../../../../codebase/dhtmlxchart.js" type ="text/javascript"></script>
    <script src="../../../../Content/json2.js" type="text/javascript"></script>
    <link href="../../../../codebase/dhtmlxgrid.css" rel="stylesheet" type="text/css" />
    <link rel="STYLESHEET" type="text/css" href="../../../../codebase/dhtmlxtabbar.css" />
    <script src="../../../../codebase/dhtmlxcommon.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxtabbar.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxtabbar_start.js" type="text/javascript"></script>
    <script src="../../../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <link rel="STYLESHEET" type="text/css" href="../../../../codebase/dhtmlxgrid.css" />
    <link rel="stylesheet" type="text/css" href="../../../../codebase/skins/dhtmlxgrid_dhx_skyblue.css" />
    <script src="../../../../codebase/dhtmlxcommon.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxgrid.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxgridcell.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxgrid_filter.js" type="text/javascript"></script>
    <script type="text/javascript">
        dhtmlx.skin = "dhx_skyblue";
    </script>

    @*<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Employee</title>
    <link href="../../../../Content/Tablestyle.css" rel="stylesheet" type="text/css" />
    <link href="../../../../codebase/dhtmlxgrid.css" rel="stylesheet" type="text/css" />
    <link href="../../../../codebase/skins/dhtmlxgrid_dhx_skyblue.css" rel="stylesheet"
        type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../codebase/dhtmlxwindows.css" />
    <link rel="stylesheet" type="text/css" href="../../../../codebase/skins/dhtmlxwindows_dhx_skyblue.css" />
    <script src="../../../../codebase/dhtmlxcommon.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxgrid.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxgridcell.js" type="text/javascript"></script>
    <script src="../../../../content/json2.js" type="text/javascript"></script>
    <link href="../../../../Content/Report.css" rel="stylesheet" type="text/css" />
    <link rel="icon" href="../../../../../../common/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="../../../../../../common/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../../../../../../common/css/style.css" type="text/css"
        media="screen" />
    <link href="../../../../Content/Site.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../codebase/dhtmlxcalendar.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../codebase/skins/dhtmlxcalendar_dhx_skyblue.css" />
    <link href="../../../../codebase/dhtmlxgrid.css" rel="stylesheet" type="text/css" />
    <link href="../../../../codebase/skins/dhtmlxgrid_dhx_skyblue.css" rel="stylesheet"
        type="text/css" />
    <script src="../../../../codebase/dhtmlxcommon.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxgrid.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxgridcell.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxgrid_excell_link.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxwindows.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxcontainer.js" type="text/javascript"></script>
    <script src="../../../../../codebase/dhtmlxcalendar.js"></script>
    <link href="../../../../Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="../../../../codebase/dhtmlxgrid_pgn.js" type="text/javascript"></script>
    <link href="../../../../codebase/dhtmlxgrid_pgn_bricks.css" rel="stylesheet" type="text/css" />
    <link rel="Stylesheet" type="text/css" href="../../../../codebase/dhtmlxtabbar.css" />
    <script src="../../../../codebase/dhtmlxcommon.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxtabbar.js" type="text/javascript"></script>
    <script src="../../../../codebase/dhtmlxtabbar_start.js" type="text/javascript"></script>
    <link href="../../../../Content/Report.css" rel="stylesheet" type="text/css" />
    <link rel="icon" href="../../../../../../common/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="../../../../../../common/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../../../../../../common/css/style.css" type="text/css"
        media="screen" />
    <link href="../../../../Content/Tablestyle.css" rel="stylesheet" type="text/css" />
    <script src="../../../../codebase/dhtmlxgrid_pgn.js" type="text/javascript"></script>
    <link href="../../../../codebase/dhtmlxgrid_pgn_bricks.css" rel="stylesheet" type="text/css" />
    <script src="../../../../codebase/dhtmlxgrid_srnd.js" type="text/javascript"></script>
    <script type="text/javascript">
        dhtmlx.skin = "dhx_skyblue";
    </script>
    <script src="../../../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>*@
    <script type="text/javascript">

        function RowDblClick(rId, cInd) {
            var cellObj = mygridRCodes.cellById(rId, 1);
            //            alert(rId);
            //            alert(cInd); 
            //alert(cellObj.getValue());
            window.open("../myfinances/PopupWeeklySalesDetail");
        }
        function abc() {
            window.location.reload();
        }
        function doOnload() {

            myCalendar = new dhtmlXCalendarObject(["txtstartdate"]);
            myCalendar.setWeekStartDay(7);
            myCalendar.setDateFormat("%m/%d/%Y");
            
            mygridRCodes = new dhtmlXGridObject('gridbox');
            mygridRCodes.setImagePath("../../../../codebase/imgs/");

            mygridRCodes.setHeader("#master_checkbox, WSR <br>DATE,SUB-TOTAL <BR> SALES,SALES TAX<BR> COLLECTED, GROSS <BR>SALES,TOTAL FEES <BR>AND ADJ,FEE <BR>TYPE 1,FEE<BR> TYPE 2,FEE<BR> TYPE 3,FEE<BR> TYPE 4,TOTAL <BR>ADJ,FEE <BR> TYPE 1<BR>ADJ,FEE<BR> TYPE 2<BR> ADJ,FEE<BR> TYPE 3<BR>ADJ,FEE<BR> TYPE 4<BR>ADJ", null, ["text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center", "text-align:center"]);
            //mygridRCodes.sortRows(0, "str", "des");
            mygridRCodes.setColAlign("center,center,right,right,right,right,right,right,right,right,right,right,right,right,right");
            mygridRCodes.setColTypes("ch,ro,ro,ro,ro,ro,ro,ro,ro,ro,ro,ro,ro,ro,ro");
            //mygridRCodes.setNumberFormat("$0.00", 1);
            //mygridRCodes.setNumberFormat("0.00", 2);
            mygridRCodes.setInitWidths("50,80,100,100,100,100,100,90,80,80,80,80,80,80,80");
            mygridRCodes.attachEvent("onRowDblClicked", "RowDblClick");
            mygridRCodes.setColSorting("str,str,str,str,str,str,str,str,str,str,str,str,str,str,str");
            //  mygridRCodes.setInitWidths("247,251");
            //mygridRCodes.setColTypes("ed,ch");
            mygridRCodes.init();
            mygridRCodes.setSkin("dhx_skyblue");
            //mygridRCodes.loadXML("../../../../common/MyWeeklySalesReport1.xml");
            var xmlstringEmpList = "";
            var Weekdate = document.getElementById("txtstartdate").value;
            var empid = { WeekDate : Weekdate };
            var jsondata = $.ajax({
                url: "../MyFinances/WeekSalReportData",
                data: JSON.stringify(empid),
                contentType: "application/json; charset=utf-8",
                success: function (msg) {
                    var AdForHomePages = msg;
                    xmlstringEmpList = xmlstringEmpList + "<rows>";
                    $.each(AdForHomePages, function (index, Emplist) {
                        xmlstringEmpList = xmlstringEmpList + "<row id='" + index + "'>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + '' + "]]></cell>";
                        if (Emplist.WSRDate != null) {
                            xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + new Date(parseInt(Emplist.WSRDate.substr(6))) + "]]></cell>";
                        }
                        else {
                            xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + '' + "]]></cell>";
                        }
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + '' + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + '' + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + Emplist.TotalSales + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + Emplist.TotalRoyalty + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + Emplist.RoyaltyFees + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + Emplist.MGMTFees + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + Emplist.TECHFees + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + Emplist.MRKTFees + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + '' + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + Emplist.RoyaltyAdj + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + Emplist.MGMTAdj + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + Emplist.TECHAdj + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "<cell><![CDATA[" + Emplist.MRKTAdj + "]]></cell>";
                        xmlstringEmpList = xmlstringEmpList + "</row>";
                    });
                    xmlstringEmpList = xmlstringEmpList + "</rows>";
                    //mygrid.clearAll();

                    mygridRCodes.loadXMLString(xmlstringEmpList);
                    //document.getElementById("gifId").style.display = "none";
                },
                type: "POST",
                dataType: "json",
                error: function (e) {
                    $('#output').innerHtml(e);

                }
            });


        }
    </script>
    </head>
    <body style="background-color: #d5f1ff;">

     @{Html.BeginForm("MyWeeklySalesReport", "MyFinances");}
     
    @* <div id="a_tabbar" class="dhtmlxTabBar" imgpath="../../../../codebase/imgs/" select="a1" style="width: 100%; height: 100%">  *@   
    
    <div style="width:100%;float:left;vertical-align:top;">

   @* <div style="width:12%;float:left;vertical-align:top;background-color:#d5f1ff; margin-top:13px; ">
     <div >
   <a href ="#" style="color:Blue;margin-left:30px;">Back </a>
   </div>
   
   
   <div style ="margin-top:10px;" >
    <a href ="#" style="color:Blue;margin-left:30px;">Refresh </a>
   </div>
 
    </div>*@

    <div style="width:100%; height:631px;float:right;vertical-align:top;">
    <div style="margin-left:30px;margin-top:15px;" >
     <span style="font-family: 18px;font-size:18px; font-weight: bold;margin-top:0px;color:Black;">Weekly Sales Report </span>
    
    </div>
      <div style="vertical-align:top;">
           

            <div style="float: left; padding-left: 30px;height:10px; margin-top: 10px;font-weight: bold;">
                <span style="font-family: 18px;"></span>
                <br />
                @Html.Label("lblstartdate", "Week Ending")
   @Html.TextBox("txtstartdate", (string)ViewBag.WeekDate, new { @class = "calendar", @readonly = "readonly" })
   @*<a href ="#" onclick="abc();" style="color:Blue;margin-left:30px;">Refresh </a>*@
   <a href="javascript:doOnload()">Refresh</a>
            </div>
            <br />
            <div>
            </div>
            <div style ="margin-left:30px; float :left;">
             
   </div>
            <br />
            
            <div style ="margin-top:30px; margin-left:600px; ">
             <span style="font-family: 18px; font-weight: bold; color:Orange; vertical-align:middle;">History</span>
            </div>
            <br />

            <div style="clear: both; height: 400px; width: 1300px; padding-left: 30px;margin-top: 0px;">
                          
                <div id="gridbox" style="width: 1290px; height: 300px; background-color: white; overflow: hidden;">
                </div> 
                    <div style="margin-top:20px;">
  <a href="@Url.Content("~/MasterData/LandingPage/MyFinances")" title="Back">
                    Back</a>
   </div>            
             </div>
           </div>  
 
    </div>
    
           
        
              

          
          
       @* </div>*@

          
      

      @{Html.EndForm();}
    </body>
    </html>