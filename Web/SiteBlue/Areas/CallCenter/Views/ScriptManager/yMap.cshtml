<html>
<head>
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script type="text/javascript" src="http://api.maps.yahoo.com/ajaxymap?v=3.8&appid=YD-eQRpTl0_JX2E95l_xAFs5UwZUlNQhhn7lj1H"></script>
</head>
<body>
@using yMapWeather.Models
@model UserLocation

@Html.Hidden("Location", Model.GetLocation())
@if (Model.Empty != Model.GetLocation())
{
<div id="map" style="height:300px;width:300px;"></div>  

<script type="text/javascript">

    $(document).ready(function () {
        setTimeout(loadMap, 3000);
    });

    function loadMap() {
        // Create a map object  
        var map = new YMap(document.getElementById('map'));

        // Add map type control  
        map.addTypeControl();

        // Add map zoom (long) control  
        map.addZoomLong();

        // Add the Pan Control  
        map.addPanControl();

        // Set map type to either of: YAHOO_MAP_SAT, YAHOO_MAP_HYB, YAHOO_MAP_REG  
        map.setMapType(YAHOO_MAP_REG);
        
        // Display the map centered on a geocoded location 
        map.drawZoomAndCenter(document.getElementById('Location').value, 8);
        map.disableKeyControls();
    }
</script>  
}
else
{ 
    <div>
        Yahoo weather api returned no weather information for this location.
    </div>
}
</body>
</html>