@model int
@if (Model != 0)
{
<html>
    <head>
        <title>Index</title>
        <link href="@Url.Content("~/Content/reset.css")" rel="stylesheet" type="text/css" media="screen" />
        <link href="@Url.Content("~/Content/master.css")" rel="stylesheet" type="text/css" media="screen" />
        <link href="@Url.Content("~/codebase/skins/dhtmlxaccordion_dhx_skyblue.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/Content/Report.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/codebase/dhtmlxgrid.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/codebase/skins/dhtmlxgrid_dhx_skyblue.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/codebase/dhtmlxlayout.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/codebase/skins/dhtmlxlayout_dhx_skyblue.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/codebase/dhtmlxcombo.css")" rel="stylesheet" type="text/css" />

        <script src="@Url.Content("~/codebase/dhtmlxaccordion.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/codebase/dhtmlxcontainer.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/codebase/dhtmlxcommon.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/codebase/dhtmlxgrid.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/codebase/dhtmlxgridcell.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/codebase/dhtmlxlayout.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/codebase/dhtmlxcombo.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/codebase/ext/dhtmlxcombo_extra.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.maskedinput-1.3.min.js")" type="text/javascript"></script>
        
        <style type="text/css">
            
            #messagebox 
            {
                position: absolute;
                top: 0; left: 30%; 
                z-index: 10; 
                background:#ffc;
                padding:5px;
                border:1px solid #CCCCCC;
                text-align:center; 
                font-weight:bold; 
                width:40%;
            }
            
            .emailname
            {
                margin: 4px;
                width: 40%;
                float: left;
            }
            
            .emailaddress
            {
                margin: 4px;
                width: 55%;
                float: left;
            }
            
            .phonename
            {
                margin: 4px;
                width: 35%;
                float: left;
            }
            
            .phonenumber
            {
                margin: 4px;
                width: 35%;
                float: left;
            }
            
            .phonecarrier
            {
                margin: 4px;
                width: 25%;
                float: left;
            }
            
            .combiboxstyle
            {
                width: 72px;
                position: relative;
                text-align: left;
                border: 1px solid #A4BED4;
                height: 25px;
                overflow: hidden;
                background-color: white;
                font-family: Tahoma;
                font-size: 11px;
                cursor: default;
                padding: 3px 4px;
                background-color: #eaf2fb;
                border: 1px solid #a4bed4;
                font-family: Tahoma;
                font-size: 12px;
            }
            
            .even
            {
                background-color: #E6E6FA;
            }
            
            .uneven
            {
                background-color: #F0F8FF;
            }
            
        </style>
        <script type="text/javascript" language="javascript">

            var expanded = true;

            $(document).ready(function () {

                $("#marketingtable td.arrow").html('&#9698;');
                $("#marketingtable td.arrow").click(function () {
                    $(this).html(expanded ? '&#9654;' : '&#9698;');
                    $('#summary-row ~ tr').toggle("fast");
                    expanded = !expanded;
                });

                //scroll the message box to the top offset of browser's scrool bar
                $(window).scroll(function () {
                    $('#messagebox').animate({ top: $(window).scrollTop() + "px" }, { queue: false, duration: 350 });
                });
            });

            function toogleNotification(element, ownerAlertId) {
                var isChecked = $('#' + element.id).is(':checked');

                $.ajax({
                    url: "/OwnerAlerts/ToogleOwnerAlertState",
                    type: 'POST',
                    data: { ownerAlertId: ownerAlertId, state: isChecked },
                    success: function (msg) {
                        if (isChecked) {
                            $("#messagebox").html("Notifications enabled for the selected alert!");
                            $("#messagebox").fadeIn("fast");
                            $("#messagebox").fadeOut(3000);
                        }
                        else {
                            $("#messagebox").html("Notifications disabled for the selected alert!");
                            $("#messagebox").fadeIn("fast");
                            $("#messagebox").fadeOut(3000);
                        }
                    },
                    error: function () {
                        alert("An error occured while saving your data, please retry.");
                    }
                });
            }

            function validateEmail(elementValue) {
                var filter = /^(([^<>()[\]\\.,;:\s@@\"]+(\.[^<>()[\]\\.,;:\s@@\"]+)*)|(\".+\"))@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return filter.test(elementValue);
            }

            function validatePhoneNumber(elementValue) {
                var phoneNumberPattern = /^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/;
                return phoneNumberPattern.test(elementValue);
            }

            function addEmailRow(tableObj, index, ownerAlertId) {
                var tbid = $(tableObj).parents('table')[0].id;

                var countElement = $('#' + tbid + ' tr').length;
                var emailname = $("#emailname" + index + "entry_0").val();
                var emailaddress = $("#emailaddress" + index + "entry_0").val();

                if (emailname == "") {
                    $("#messagebox").html("Please enter name");
                    $("#messagebox").fadeIn("fast");
                    $("#messagebox").fadeOut(3000);

                    $("#emailname" + index + "entry_0").focus();
                    return;
                } else {
                    if (emailname.length < 3 || emailname.length > 20) {
                        $("#messagebox").html("Please enter name between 3-20 characters");
                        $("#messagebox").fadeIn("fast");
                        $("#messagebox").fadeOut(3000);

                        $("#emailname" + index + "entry_0").focus();
                        return;
                    }
                }

                if (emailaddress == "") {
                    $("#messagebox").html("Please enter address");
                    $("#messagebox").fadeIn("fast");
                    $("#messagebox").fadeOut(3000);

                    $("#emailaddress" + index + "entry_0").focus();
                    return;
                } else {
                    if (!validateEmail(emailaddress)) {
                        $("#messagebox").html("Please enter email correctly");
                        $("#messagebox").fadeIn("fast");
                        $("#messagebox").fadeOut(3000);

                        $("#emailaddress" + index + "entry_0").focus();
                        return;
                    }
                }

                $("#emailname" + index + "entry_0").css("background-color", "#ffffff");
                $("#emailaddress" + index + "entry_0").css("background-color", "#ffffff");

                $.ajax({
                    url: "/OwnerAlerts/CreateEmailDestination",
                    type: 'POST',
                    data: { ownerAlertId: ownerAlertId, communicationTypeId: 1, emailName: emailname, emailAddress: emailaddress, destinationAdditionalText: "" },
                    success: function (result) {

                        if (result == -1) {
                            $("#messagebox").html("Someone already has that username or email!");
                            $("#messagebox").fadeIn("fast");
                            $("#messagebox").fadeOut(3000);
                            return;
                        }

                        var emailSection = "";
                        $.ajax({
                            type: "POST",
                            url: "/OwnerAlerts/OwnerAlertDestinations",
                            data: { ownerAlertId: ownerAlertId, communicationTypeId: 1 },
                            success: function (emailDestinations) {
                                $.each(emailDestinations, function (iEmail, oEmail) {
                                    try {
                                        emailSection += '<tr id="tr' + oEmail.DestinationID + '"><td style="margin: 4px; width: 40%; float: left"><div style="margin: 4px; width: 15%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Name</div><div style="margin: 4px; width: 25%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" id="emailname' + index + 'entry_' + iEmail + '" value="' + oEmail.OwnerAlertDestinationName + '" /></div></td> <td style="margin: 4px; width: 55%; float: left"><div style="margin: 4px; width: 30%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Email Address</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" class="emailfield" id="emailaddress' + index + 'entry_' + iEmail + '" value="' + oEmail.OwnerAlertDestinationText + '" /></div></td><td><a onclick="javascript:deleteDestination(' + oEmail.DestinationID + ')"><img src="@Url.Content("~/Content/images/delete.png")" alt="Delete"</a></td></tr>';
                                    }
                                    catch (e) {
                                        alert("Error");
                                    }
                                });

                                $('#' + tbid).html('<tr><td style="margin: 4px; width: 40%; float: left"><div style="margin: 4px; width: 15%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Name</div><div style="margin: 4px; width: 25%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" id="emailname' + index + 'entry_0" /></div></td> <td style="margin: 4px; width: 55%; float: left"><div style="margin: 4px; width: 30%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Email Address</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" class="emailfield" id="emailaddress' + index + 'entry_0" /></div></td><td><a onclick="javascript:addEmailRow(this, ' + index + ', ' + ownerAlertId + ')"><img src="@Url.Content("~/Content/images/email_add.png")" alt="Add" /></a></td></tr>' + emailSection);

                                $("#messagebox").html("Email added with success!");
                                $("#messagebox").fadeIn("fast");
                                $("#messagebox").fadeOut(3000);
                            },
                            error: function (ex) {
                                alert("Error");
                            }
                        });
                    },
                    error: function () {
                        alert("An error occured while saving your data, please retry.");
                    }
                });

            }

            function addPhoneTextRow(tableObj, index, ownerAlertId) {
                var tbid = $(tableObj).parents('table')[0].id;

                var countElement = $('#' + tbid + ' tr').length;
                var phonename = $("#name" + index + "entry_0").val();
                var phonenumber = $("#number" + index + "entry_0").val();
                var phonecarrier = $("#carrier" + index + "entry_0").val();

                if (phonename == "") {
                    $("#messagebox").html("Please enter name");
                    $("#messagebox").fadeIn("fast");
                    $("#messagebox").fadeOut(3000);

                    $("#name" + index + "entry_0").focus();
                    return;
                } else {
                    if (phonename.length < 3 || phonename.length > 20) {
                        $("#messagebox").html("Please enter name between 3-20 characters");
                        $("#messagebox").fadeIn("fast");
                        $("#messagebox").fadeOut(3000);

                        $("#name" + index + "entry_0").focus();
                        return;
                    }
                }

                if (phonenumber == "") {
                    $("#messagebox").html("Please enter number");
                    $("#messagebox").fadeIn("fast");
                    $("#messagebox").fadeOut(3000);

                    $("#number" + index + "entry_0").focus();
                    return;
                } else {
                    if (!validatePhoneNumber(phonenumber)) {
                        $("#messagebox").html("Please Enter Cell Phone Number in (###) ###-#### Format");
                        $("#messagebox").fadeIn("fast");
                        $("#messagebox").fadeOut(3000);

                        $("#number" + index + "entry_0").focus();
                        return;
                    }
                }

                $("#name" + index + "entry_0").css("background-color", "#ffffff");
                $("#number" + index + "entry_0").css("background-color", "#ffffff");

                $.ajax({
                    url: "/OwnerAlerts/CreatePhoneDestination",
                    type: 'POST',
                    data: { ownerAlertId: ownerAlertId, communicationTypeId: 2, phoneName: phonename, phoneNumber: phonenumber, phoneCarrier: phonecarrier },
                    success: function (result) {

                        if (result == -1) {
                            $("#messagebox").html("Someone already has that Name or Phonenumber!");
                            $("#messagebox").fadeIn("fast");
                            $("#messagebox").fadeOut(3000);
                            return;
                        }

                        var phoneSection = "";
                        var phoneCount = 1;
                        $.ajax({
                            type: "POST",
                            url: "/OwnerAlerts/OwnerAlertDestinations",
                            data: { ownerAlertId: ownerAlertId, communicationTypeId: 2 },
                            success: function (phoneDestinations) {
                                $.each(phoneDestinations, function (iPhone, oPhone) {
                                    try {
                                        var option = '';
                                        if (oPhone.OwnerAlertDestinationAdditionalText == "Verizon")
                                            option = '<option selected="selected">Verizon</option><option>AT&T</option><option>Sprint</option><option>Mobile</option>';
                                        if (oPhone.OwnerAlertDestinationAdditionalText == "AT&T")
                                            option = '<option>Verizon</option><option selected="selected">AT&T</option><option>Sprint</option><option>Mobile</option>';
                                        if (oPhone.OwnerAlertDestinationAdditionalText == "Sprint")
                                            option = '<option>Verizon</option><option>AT&T</option><option selected="selected">Sprint</option><option>Mobile</option>';
                                        if (oPhone.OwnerAlertDestinationAdditionalText == "Mobile")
                                            option = '<option>Verizon</option><option>AT&T</option><option>Sprint</option><option selected="selected">Mobile</option>';
                                        phoneSection = phoneSection + '<tr id="tr' + oPhone.DestinationID + '"><td style="margin: 4px; width: 35%; float: left"><div style="margin: 4px; width: 20%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Name</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" style="width: 100px;" id="name' + index + 'entry_' + iPhone + '" value="' + oPhone.OwnerAlertDestinationName + '" /></div></td><td style="margin: 4px; width: 35%; float: left"><div style="margin: 4px; width: 25%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Number</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" style="width: 100px;" class="numberfield" id="number' + index + 'entry_' + iPhone + '" value="' + oPhone.OwnerAlertDestinationText + '" /></div></td><td style="margin: 4px; width: 25%; float: left"><div style="margin: 4px; width: 35%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Carrier</div><div style="margin: 4px; width: 5%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><select id="carrier' + index + 'entry_' + iPhone + '" name="alfa2" class="combiboxstyle">' + option + '</select></div></td><td><a  onclick="javascript:deleteDestination(' + oPhone.DestinationID + ');"><img src="@Url.Content("~/Content/images/delete.png")" alt="Delete" /></a></td></tr>';
                                    }
                                    catch (e) {
                                        alert("Error");
                                    }
                                    phoneCount++;
                                });

                                var destinationPhoneTable = 'destinationsdescr' + index + 'table';
                                $("#" + destinationPhoneTable).html('<tr><td style="margin: 4px; width: 35%; float: left"><div style="margin: 4px; width: 20%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Name</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" style="width: 100px;" id="name' + index + 'entry_0" /></div></td><td style="margin: 4px; width: 35%; float: left"><div style="margin: 4px; width: 25%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Number</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" style="width: 100px;" class="numberfield" id="number' + index + 'entry_0" /></div></td><td style="margin: 4px; width: 25%; float: left"><div style="margin: 4px; width: 35%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Carrier</div><div style="margin: 4px; width: 5%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><select id="carrier' + index + 'entry_0" name="alfa2" class="combiboxstyle"><option>Verizon</option><option>AT&T</option><option>Sprint</option><option>Mobile</option></select></div></td><td><a  onclick="javascript:addPhoneTextRow(this, ' + index + ', ' + ownerAlertId + ');"><img src="@Url.Content("~/Content/images/phone_add.gif")" alt="add" /></a></td></tr>' + phoneSection);
                                    
                                $("#messagebox").html("Cellphone added with success!");
                                $("#messagebox").fadeIn("fast");
                                $("#messagebox").fadeOut(3000);
                            },
                            error: function (ex) {
                                alert("Error");
                            }
                        });

                    },
                    error: function () {
                        alert("An error occured while saving your data, please retry.");
                    }
                });
                
            }

            function deleteDestination(destinationId) {
                var r = confirm("Are sure you want to delete this entry?");
                if (r == true) {
                    $.ajax({
                        url: "/OwnerAlerts/DeleteOwnerAlertDestination",
                        type: 'POST',
                        data: { id: destinationId },
                        success: function (r) {
                            $("#tr" + destinationId).remove();

                            $("#messagebox").html("Item deleted with success!");
                            $("#messagebox").fadeIn("fast");
                            $("#messagebox").fadeOut(3000);
                        },
                        error: function () {
                            alert("An error occured while trying to remove the selected item!");
                        }
                    });
                }
            }

            function deleteRow(tableID) {
                try {
                    var table = document.getElementById(tableID);
                    var rowCount = table.rows.length;

                    for (var i = 0; i < rowCount; i++) {
                        var row = table.rows[i];
                        var chkbox = row.cells[0].childNodes[0];
                        if (null != chkbox && true == chkbox.checked) {
                            table.deleteRow(i);
                            rowCount--;
                            i--;
                        }
                    }
                } catch (e) {
                    alert(e);
                }
            }

            $(document).ready(function () {
                window.dhx_globalImgPath = "../../../../codebase/imgs/";
                dhtmlx.skin = "dhx_skyblue";

                var myCars = new Array();
                var html = new Array();
                var parent = new Array();
                var parentdiv;
                var count;
                var htmldiv;
                var dhxAccord;
                var dhxLayout, dhxGrid, dhxLayout1, dhxLayout2, dhxLayout3, dhxLayout4, dhxLayout5, dhxLayout6, dhxLayout7;
                dhxAccord = new dhtmlXAccordion("accordObj");
                $.ajax({
                    type: "POST",
                    url: "/OwnerAlerts/GetReferral/@Model",
                    success: function (result) {

                        $.each(result, function (index, OwnerAlerts) {
                            try {
                                var tableName = 'destinationsdescr' + index + 'table';
                                var destinations1 = "destinations1" + index;
                                var Destinations2 = "destinations2" + index;
                                var emailSection = '';
                                var phoneSection = "";

                                var parentId = "parentId" + index;
                                var alertID = OwnerAlerts.OwnerAlertId;

                                // Add all the items
                                // Email section
                                $.ajax({
                                    type: "POST",
                                    url: "/OwnerAlerts/OwnerAlertDestinations",
                                    data: { ownerAlertId: alertID, communicationTypeId: 1 },
                                    success: function (emailDestinations) {
                                        $.each(emailDestinations, function (iEmail, oEmail) {
                                            try {
                                                emailSection += '<tr id="tr' + oEmail.DestinationID + '"><td style="margin: 4px; width: 40%; float: left"><div style="margin: 4px; width: 15%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Name</div><div style="margin: 4px; width: 25%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" id="emailname' + index + 'entry_' + iEmail + '" value="' + oEmail.OwnerAlertDestinationName + '" /></div></td> <td style="margin: 4px; width: 55%; float: left"><div style="margin: 4px; width: 30%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Email Address</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" class="emailfield" id="emailaddress' + index + 'entry_' + iEmail + '" value="' + oEmail.OwnerAlertDestinationText + '" /></div></td><td><a onclick="javascript:deleteDestination(' + oEmail.DestinationID + ')"><img src="@Url.Content("~/Content/images/delete.png")" alt="Delete"</a></td></tr>';
                                            }
                                            catch (e) {
                                                alert("Error");
                                            }
                                        });

                                        var destinationEmailTable = 'destinationsdesc1' + index + 'table';
                                        $("#" + destinationEmailTable).html('<tr><td style="margin: 4px; width: 40%; float: left"><div style="margin: 4px; width: 15%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Name</div><div style="margin: 4px; width: 25%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" id="emailname' + index + 'entry_0" /></div></td> <td style="margin: 4px; width: 55%; float: left"><div style="margin: 4px; width: 30%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Email Address</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" class="emailfield" id="emailaddress' + index + 'entry_0" /></div></td><td><a onclick="javascript:addEmailRow(this, ' + index + ', ' + OwnerAlerts.OwnerAlertId + ')"><img src="@Url.Content("~/Content/images/email_add.png")" alt="Add" /></a></td></tr>' + emailSection);
                                    },
                                    error: function (ex) {
                                        alert("Error");
                                    }
                                });

                                html.push('<div id=' + destinations1 + ' style="width: 100%; height: 100%; overflow-x: hidden; overflow-y: scroll;"><div id="destinationsdesc1"><div style="margin-left: 4px; margin-bottom: 10px; width: 100%; margin-top: 6px;float: left; font-size: 14px; font-family: Tahoma; font-weight: bold;">By Email Address</div><div style="width: 100%; float: left; margin: 4px;"><table style="width: 100%; float: left;" id="destinationsdesc1' + index + 'table"><tr><td style="margin: 4px; width: 40%; float: left"><div style="margin: 4px; width: 15%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Name</div><div style="margin: 4px; width: 25%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" id="emailname' + index + 'entry_0" /></div></td> <td style="margin: 4px; width: 55%; float: left"><div style="margin: 4px; width: 30%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Email Address</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" class="emailfield" id="emailaddress' + index + 'entry_0" /></div></td><td><a onclick="javascript:addEmailRow(this, ' + index + ', ' + OwnerAlerts.OwnerAlertId + ')"><img src="@Url.Content("~/Content/images/email_add.png")" alt="Add" /></a></td></tr><tr><td colspan="2"><img src="@Url.Content("~/Content/images/loading.gif")" alt="Loading" /></td></tr></table></div></div></div>');
                                
                                var phoneCount = 1;
                                $.ajax({
                                    type: "POST",
                                    url: "/OwnerAlerts/OwnerAlertDestinations",
                                    data: { ownerAlertId: alertID, communicationTypeId: 2 },
                                    success: function (phoneDestinations) {
                                        $.each(phoneDestinations, function (iPhone, oPhone) {
                                            try {
                                                var option = '';
                                                if (oPhone.OwnerAlertDestinationAdditionalText == "Verizon")
                                                    option = '<option selected="selected">Verizon</option><option>AT&T</option><option>Sprint</option><option>Mobile</option>';
                                                if (oPhone.OwnerAlertDestinationAdditionalText == "AT&T")
                                                    option = '<option>Verizon</option><option selected="selected">AT&T</option><option>Sprint</option><option>Mobile</option>';
                                                if (oPhone.OwnerAlertDestinationAdditionalText == "Sprint")
                                                    option = '<option>Verizon</option><option>AT&T</option><option selected="selected">Sprint</option><option>Mobile</option>';
                                                if (oPhone.OwnerAlertDestinationAdditionalText == "Mobile")
                                                    option = '<option>Verizon</option><option>AT&T</option><option>Sprint</option><option selected="selected">Mobile</option>';
                                                phoneSection = phoneSection + '<tr id="tr' + oPhone.DestinationID + '"><td style="margin: 4px; width: 35%; float: left"><div style="margin: 4px; width: 20%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Name</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" style="width: 100px;" id="name' + index + 'entry_' + iPhone + '" value="' + oPhone.OwnerAlertDestinationName + '" /></div></td><td style="margin: 4px; width: 35%; float: left"><div style="margin: 4px; width: 25%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Number</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" style="width: 100px;" class="numberfield" id="number' + index + 'entry_' + iPhone + '" value="' + oPhone.OwnerAlertDestinationText + '" /></div></td><td style="margin: 4px; width: 25%; float: left"><div style="margin: 4px; width: 35%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Carrier</div><div style="margin: 4px; width: 5%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><select id="carrier' + index + 'entry_' + iPhone + '" name="alfa2" class="combiboxstyle">' + option + '</select></div></td><td><a  onclick="javascript:deleteDestination(' + oPhone.DestinationID + ');"><img src="@Url.Content("~/Content/images/delete.png")" alt="Delete" /></a></td></tr>';
                                            }
                                            catch (e) {
                                                alert("Error");
                                            }
                                            phoneCount++;
                                        });

                                        var destinationPhoneTable = 'destinationsdescr' + index + 'table';
                                        $("#" + destinationPhoneTable).html('<tr><td style="margin: 4px; width: 35%; float: left"><div style="margin: 4px; width: 20%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Name</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" style="width: 100px;" id="name' + index + 'entry_0" /></div></td><td style="margin: 4px; width: 35%; float: left"><div style="margin: 4px; width: 25%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Number</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" style="width: 100px;" class="numberfield" id="number' + index + 'entry_0" /></div></td><td style="margin: 4px; width: 25%; float: left"><div style="margin: 4px; width: 35%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Carrier</div><div style="margin: 4px; width: 5%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><select id="carrier' + index + 'entry_0" name="alfa2" class="combiboxstyle"><option>Verizon</option><option>AT&T</option><option>Sprint</option><option>Mobile</option></select></div></td><td><a  onclick="javascript:addPhoneTextRow(this, ' + index + ', ' + OwnerAlerts.OwnerAlertId + ');"><img src="@Url.Content("~/Content/images/phone_add.gif")" alt="Add" /></a></td></tr>' + phoneSection);
                                    },
                                    error: function (ex) {
                                        alert("Error");
                                    }
                                });
                                html.push('<div id=' + Destinations2 + ' style="width: 100%; height: 100%; overflow-x: hidden; overflow-y: scroll;"> <div id="destinationsdesc2"> <div style="margin-left: 4px; margin-bottom: 10px; width: 100%; margin-top: 6px;float: left; font-size: 14px; font-family: Tahoma; font-weight: bold;">By Cellphone Text</div><div style="width: 100%; float: left; margin: 4px;"><table style="width: 100%; float: left;" id="destinationsdescr' + index + 'table"><tr><td style="margin: 4px; width: 35%; float: left"><div style="margin: 4px; width: 20%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Name</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" style="width: 100px;" id="name' + index + 'entry_0" /></div></td><td style="margin: 4px; width: 35%; float: left"><div style="margin: 4px; width: 25%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Number</div><div style="margin: 4px; width: 30%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><input type="text" style="width: 100px;" class="numberfield" id="number' + index + 'entry_0" /></div></td><td style="margin: 4px; width: 25%; float: left"><div style="margin: 4px; width: 35%; float: left; font-size: 12px; font-family: Tahoma;font-weight: bold;">Carrier</div><div style="margin: 4px; width: 5%; float: left; font-size: 10px; font-family: Tahoma;font-weight: bold;"><select id="carrier' + index + 'entry_0" name="alfa2" class="combiboxstyle"><option>Verizon</option><option>AT&T</option><option>Sprint</option><option>Mobile</option></select></div></td><td><a  onclick="javascript:addPhoneTextRow(this, ' + index + ', ' + OwnerAlerts.OwnerAlertId + ');"><img src="@Url.Content("~/Content/images/phone_add.gif")" alt="add" /></a></td></tr><tr><td colspan="3"><img src="@Url.Content("~/Content/images/loading.gif")" alt="Loading" /></td></tr>' + phoneSection + '</table></div></div></div>');
                                parent.push('<div id=' + parentId + ' style="position: relative; margin-left: 5px; margin-top: 10px;width: 94%; height: 190px;"></div>');
                                phoneSection = "";
                            }
                            catch (e) {
                                alert(e);
                            }
                        });
                        $.each(html, function (index, value) {
                            if (index == 0) {
                                htmldiv = value;
                            }
                            else {
                                htmldiv = htmldiv + value;
                            }
                        });

                        $('#div').html(htmldiv);
                        $.each(parent, function (index, value) {
                            if (index == 0) {
                                parentdiv = value;
                            }
                            else {
                                parentdiv = parentdiv + value;
                            }
                        });

                        $('#parent').html(parentdiv);
                        $.each(result, function (index, OwnerAlerts) {
                            var id = "parentId" + index;

                            try {
                                var as2 = new dhtmlXLayoutObject(id, "2U");
                            }
                            catch (e) {
                                alert(e);
                            }
                            myCars[index] = as2;
                        });
                        dhxAccord.enableMultiMode(true);

                        $.each(result, function (index, OwnerAlerts) {
                            dhxAccord.addItem("a" + index, "<div><table style='width:100%;margin-top:2px;'><tr><td style='width:5%'><input type='checkbox' style='margin-left:8px;' " + ((OwnerAlerts.OwneralertEnabledYN != null && OwnerAlerts.OwneralertEnabledYN == true) ? "checked='checked'" : "") + " class='checkbox' id='chk_" + OwnerAlerts.OwnerAlertId + "' onclick='javascript:toogleNotification(chk_" + OwnerAlerts.OwnerAlertId + ", " + OwnerAlerts.OwnerAlertId + ");' /></td><td style='width:25%'><span class='margindiv'>" + OwnerAlerts.Subject + "</span></td><td style='width:65%'><span class='divdesc'>" + OwnerAlerts.Descriptions + "</span></td></tr></table><div>");
                            dhxAccord.closeItem("a" + index);
                        });
                        dhxAccord.forEachItem(function (item) {
                            item.setHeight(240);
                        });
                        dhxAccord._enableOpenEffect = true;
                        $.each(myCars, function (index, value) {
                            value.cells("a").setText("Destinations 1");
                            value.cells("a").setHeight(200);
                            value.cells("b").setText("Destinations 2");
                            value.cells("a").attachObject("destinations1" + index);
                            value.cells("b").attachObject("destinations2" + index);
                            dhxAccord.cells("a" + index).attachObject("parentId" + index);
                        });
                    }
                });
            });

        </script>
    </head>
    <body class="gradient">
        <div id="maindiv" style="float: left; width: 100%;">
            <div style="margin-left: 15px; margin-top: 15px; color: Black; font-size: 20px; font-weight: bolder; font-style: italic;">
                Owner Alerts</div>
            <div style="margin-left: 15px; margin-top: 15px; color: Black; font-weight: bold; font-size: 16px; font-style: italic; margin-bottom: 15px;">
                You can check or uncheck the boxes on the left of the screen in order to receive
                e-mail or<br />
                text message alerts on your cell phone when the associated task has occurred
            </div>
            <div style="border: 0px solid white; width: 100%; margin-top: 15px; margin-bottom: 15px;">
                <div id="accordObj" style="position: relative; margin: 15px;">
                </div>
            </div>
            <div id="div">
            </div>
            <div id="parent">
            </div>
            <div style="height: 150px; margin-left: 15px; font-weight: bold;">
                <a href="@Url.Content("~/LandingPage/Dashboard")" title="Back to Dashboard">Back to
                    Dashboard</a>
            </div>
        </div>

        <div id="messagebox" style="display:none"></div>
    </body>
</html>
}
else
{
    @:<text>No information available</text>
}
